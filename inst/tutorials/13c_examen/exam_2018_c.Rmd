---
title: "Examen aout 2019 : Version A"
subtitle: "Traitement des données I"
author: "Guyliann Engels & Philippe Grosjean"
output:
  learnr::tutorial
tutorial:
  id: "sdd1.13c"
  version: 1.0.0
runtime: shiny_prerendered
---

```{r setup, include=FALSE}
library(learnr)
library(knitr)
SciViews::R()

options(tutorial.event_recorder = BioDataScience::record_sdd)
tutorial_options(exercise.checker = BioDataScience::checker_sdd)
tutorial_options(exercise.timelimit = 60)
tutorial_options(exercise.cap = "Code R")
knitr::opts_chunk$set(echo = FALSE, comment = NA)

library(BioDataScience)
#dataset

```

```{r, echo=FALSE}
fixedRow(
  column(9, div(
    img(src = 'images/BioDataScience-128.png', align = "left"),
    h1("Science des données biologiques"),
    "Réalisé par le service d'Écologie numérique des Milieux aquatiques, Université de Mons (Belgique)"
  )),
  column(3, div(
    textInput("user", "Utilisateur :", ""),
    textInput("email", "Email :", "")
  ))
)
textOutput("user") # This is newer shown, but required to trigger an event!
textOutput("email") # Idem!
```

```{r, context="server"}
output$user <- renderText({BioDataScience::user_name(input$user);""})
output$email <- renderText({BioDataScience::user_email(input$email);""})
updateTextInput(session, "user", value = BioDataScience::user_name())
updateTextInput(session, "email", value = BioDataScience::user_email())
```

## Préambule

Durant l'ensemble de ce cours, vous avez été confronté à des learnr afin de vérifier l'acquisition de différents concepts liés à la science des données biologiques. Votre examen vous est proposé sous le même format. 

Ce questionnaire comprend 21 questions dont 20 questions à choix multiples 

![](images/attention.jpg)

**Ne vous trompez pas dans votre adresse mail et votre identifiant Github**

**N'oubliez pas de soumettre votre réponse après chaque exercice**

> Conformément au RGPD ([Règlement Général sur la Protection des Données](https://ec.europa.eu/info/law/law-topic/data-protection/reform/rules-business-and-organisations/principles-gdpr_fr)), nous sommes tenus de vous informer de ce que vos résultats seront collecté afin de suivre votre progression. **Les données seront enregistrées au nom de l'utilisateur apparaissant en haut de cette page. Corrigez si nécessaire !** En utilisant ce tutoriel, vous marquez expressément votre accord pour que ces données puissent être collectées par vos enseignants et utilisées pour vous aider et vous évaluer. Après avoir été anonymisées, ces données pourront également servir à des études globales dans un cadre scientifique et/ou éducatif uniquement.

## Nuage de points

Le jeu de données `growth` est mis à votre disposition comprenant la variable `weight` et la variable `height`. 

Réalisez un nuage de points avec la variable `weight` en abscisse et `height` en ordonnée. 

**Des snippets sont mis à votre disposition en fin de question**

```{r np01, message= FALSE, warning= FALSE}
set.seed(1000)
growth <- tibble::tibble(
  weight = (1:100 + rnorm(n = 100, mean = 0,sd = 0.5) + 10),
  height = (0.3*weight) + rnorm(n = 100, mean = 0,sd = 3) + 30)

#chart(growth, height~ weight) +
#  geom_point() 
```


```{r visuI01_cal, exercise = TRUE, exercise.setup = "np01"}

```

Répondez à la question ci-dessous sur base du graphique ci-dessus:

```{r qeq_visuI01}
question("Qualifiez la variable height par rapport à la variable weight ?",
  answer("height est proportionnel à weight", correct = TRUE),
  answer("height est inversément proportionnel à weight"),
  answer("height et weight ne sont pas associé"),
  random_answer_order = TRUE)
```

*Snippets*

```{r, echo = TRUE, eval = FALSE}
## Charts ###############################################################################################
# ...charts
#..c

## Charts: Add ##########################################################################################
#..charts: add layers or annotations
#.ca

#.caplotly: convert last ggplot2 into interactive chart
plotly::ggplotly()

#.caylab: add or change Y label
${1:CHART} +
  ylab("${2:YOUR Y LABEL HERE}")

#.caxlab: add or change X label
${1:CHART} +
  xlab("${2:YOUR X LABEL HERE}")

#.catitle: add a plot title
${1:CHART} +
  ggtitle("${2:YOUR TITLE HERE}")

## Charts: Multivariate #################################################################################
# ..charts: multivariate
# .cm

#.cmcorr: correlation chart
corrplot::corrplot(cor(${1:DF}[, ${2:1:3}],
                       use = "pairwise.complete.obs"), method = "ellipse")

#.cmxy: multivariate X-Y scatterplot
GGally::ggscatmat(as.data.frame(${1:DF}), ${2:1:3})

## Charts: Bivariate ####################################################################################
snippet ..charts: bivariate
	.cb

#.cbhistfact: histogram by factor (facets)
chart(data = ${1:DF}, ~${2:XNUM} %fill=% ${3:XFACTOR} | ${3:XFACTOR}) +
  geom_histogram(data = select(${1:DF}, -${3:XFACTOR}), fill = "grey", bins = ${4:30}) +
  geom_histogram(bins = ${4:30}, show.legend = FALSE)

#.cberrbar2: error bars by two factors
chart(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR1} %col=% ${4:XFACTOR2}) +
  geom_jitter(alpha = 0.4, position = position_dodge(0.4)) +
  stat_summary(geom = "point", fun.y = "mean", position = position_dodge(0.4)) +
  stat_summary(geom = "errorbar", width = 0.1, position = position_dodge(0.4),
               fun.data = "mean_cl_normal", fun.args = list(conf.int = 0.95))

#.cberrbar: error bars by factor
chart(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR}) +
  geom_jitter(alpha = 0.4, width = 0.2) +
  stat_summary(geom = "point", fun.y = "mean") +
  stat_summary(geom = "errorbar", width = 0.1,
               fun.data = "mean_cl_normal", fun.args = list(conf.int = 0.95))

#.cbviolin: violinplot by factor
chart(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR}) +
  geom_violin()

#.cbbox: boxplot by factor
chart(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR}) +
  geom_boxplot()

#.cbxy: X-Y scatterplot
chart(data = ${1:DF}, ${2:YNUM} ~ ${3:XNUM}) +
  geom_point()

## Charts: Univariate ###################################################################################
# ..charts: univariate
#.cu

#.cuqqchisq: QQ plot - chi-square
car::qqPlot(${1:DF}[["${2:XNUM}"]], distribution = "chisq", df = ${3:DEGREES_OF_FREEDOM},
            envelope = 0.95, col = "Black", ylab = "${2:XNUM}")

#.cuqqf: QQ plot - F
car::qqPlot(${1:DF}[["${2:XNUM}"]], distribution = "f", df1 = ${3:NUMERATOR_DF}, df2 = ${4:DENOMINATOR_DF},
            envelope = 0.95, col = "Black", ylab = "${2:XNUM}")

#.cuqqt: QQ plot - Student t
car::qqPlot(${1:DF}[["${2:XNUM}"]], distribution = "t", df = ${3:DEGREES_OF_FREEDOM},
            envelope = 0.95, col = "Black", ylab = "${2:XNUM}")

#.cuqqnorm: QQ plot - normal
car::qqPlot(${1:DF}[["${2:XNUM}"]], distribution = "norm",
            envelope = 0.95, col = "Black", ylab = "${2:XNUM}")

#.cuhbar: horizontal bars
chart(data = ${1:DF}, ~factor(${2:VAR})) +
  geom_bar() + coord_flip()

#.cuvbar: vertical bars
chart(data = ${1:DF}, ~factor(${2:VAR})) +
  geom_bar()

#.cuhist: histogram
chart(data = ${1:DF}, ~${2:VARNUM}) +
  geom_histogram(binwidth = ${3:30})
```


## Campagne de pêche de *Thymallus thymallus* L. 1758

Le service de la pêche du service public de wallonie a réalisé une campagne de pêche axée sur l'ombre commun sur son territoire afin d'étudier la taille des spécimens présents dans les cours d'eau. 

Le jeu de données `thymallus` est mis à votre disposition comprenant la variable `size`. Réalisez un histogramme afin de déterminer le mode et la symétrie. 

**Des snippets sont mis à votre disposition en fin de question**

```{r histo01, message= FALSE, warning= FALSE}
set.seed(1000)
thymallus <- data_frame(size = rnorm(5000, 30, 8)) %>.%
  filter(., size > 0)

#chart(df, ~ size) +
#  geom_histogram() +
#  labs(x = "Unimodal & symétrique", y = "Effectifs")
```


```{r visuII01_cal, exercise = TRUE, exercise.setup = "histo01"}

```

Répondez à la question ci-dessous sur base du graphique ci-dessus:

```{r qeq_visuII01}
question("Définissez le mode et la symétrie de l'histogramme portant sur la taille de l'ombre commun",
  answer("unimodal", correct = TRUE),
  answer("bimodal"),
  answer("multimodal"),
  answer("symétrique", correct = TRUE), 
  answer("asymétrique"),
  random_answer_order = TRUE)
```

*Snippets*

```{r, echo = TRUE, eval = FALSE}
## Charts ###############################################################################################
# ...charts
#..c

## Charts: Add ##########################################################################################
#..charts: add layers or annotations
#.ca

#.caplotly: convert last ggplot2 into interactive chart
plotly::ggplotly()

#.caylab: add or change Y label
${1:CHART} +
  ylab("${2:YOUR Y LABEL HERE}")

#.caxlab: add or change X label
${1:CHART} +
  xlab("${2:YOUR X LABEL HERE}")

#.catitle: add a plot title
${1:CHART} +
  ggtitle("${2:YOUR TITLE HERE}")

## Charts: Multivariate #################################################################################
# ..charts: multivariate
# .cm

#.cmcorr: correlation chart
corrplot::corrplot(cor(${1:DF}[, ${2:1:3}],
                       use = "pairwise.complete.obs"), method = "ellipse")

#.cmxy: multivariate X-Y scatterplot
GGally::ggscatmat(as.data.frame(${1:DF}), ${2:1:3})

## Charts: Bivariate ####################################################################################
snippet ..charts: bivariate
	.cb

#.cbhistfact: histogram by factor (facets)
chart(data = ${1:DF}, ~${2:XNUM} %fill=% ${3:XFACTOR} | ${3:XFACTOR}) +
  geom_histogram(data = select(${1:DF}, -${3:XFACTOR}), fill = "grey", bins = ${4:30}) +
  geom_histogram(bins = ${4:30}, show.legend = FALSE)

#.cberrbar2: error bars by two factors
chart(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR1} %col=% ${4:XFACTOR2}) +
  geom_jitter(alpha = 0.4, position = position_dodge(0.4)) +
  stat_summary(geom = "point", fun.y = "mean", position = position_dodge(0.4)) +
  stat_summary(geom = "errorbar", width = 0.1, position = position_dodge(0.4),
               fun.data = "mean_cl_normal", fun.args = list(conf.int = 0.95))

#.cberrbar: error bars by factor
chart(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR}) +
  geom_jitter(alpha = 0.4, width = 0.2) +
  stat_summary(geom = "point", fun.y = "mean") +
  stat_summary(geom = "errorbar", width = 0.1,
               fun.data = "mean_cl_normal", fun.args = list(conf.int = 0.95))

#.cbviolin: violinplot by factor
chart(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR}) +
  geom_violin()

#.cbbox: boxplot by factor
chart(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR}) +
  geom_boxplot()

#.cbxy: X-Y scatterplot
chart(data = ${1:DF}, ${2:YNUM} ~ ${3:XNUM}) +
  geom_point()

## Charts: Univariate ###################################################################################
# ..charts: univariate
#.cu

#.cuqqchisq: QQ plot - chi-square
car::qqPlot(${1:DF}[["${2:XNUM}"]], distribution = "chisq", df = ${3:DEGREES_OF_FREEDOM},
            envelope = 0.95, col = "Black", ylab = "${2:XNUM}")

#.cuqqf: QQ plot - F
car::qqPlot(${1:DF}[["${2:XNUM}"]], distribution = "f", df1 = ${3:NUMERATOR_DF}, df2 = ${4:DENOMINATOR_DF},
            envelope = 0.95, col = "Black", ylab = "${2:XNUM}")

#.cuqqt: QQ plot - Student t
car::qqPlot(${1:DF}[["${2:XNUM}"]], distribution = "t", df = ${3:DEGREES_OF_FREEDOM},
            envelope = 0.95, col = "Black", ylab = "${2:XNUM}")

#.cuqqnorm: QQ plot - normal
car::qqPlot(${1:DF}[["${2:XNUM}"]], distribution = "norm",
            envelope = 0.95, col = "Black", ylab = "${2:XNUM}")

#.cuhbar: horizontal bars
chart(data = ${1:DF}, ~factor(${2:VAR})) +
  geom_bar() + coord_flip()

#.cuvbar: vertical bars
chart(data = ${1:DF}, ~factor(${2:VAR})) +
  geom_bar()

#.cuhist: histogram
chart(data = ${1:DF}, ~${2:VARNUM}) +
  geom_histogram(binwidth = ${3:30})
```





## Test de comparaisons multiples

```{r}
set.seed(43)
y <- c(rnorm(n = 40, mean = 20, sd = 5),
       rnorm(n = 40, mean = 21, sd = 5),
       rnorm(n = 40, mean = 22, sd = 5))
group <- rep(c("A", "B", "C"), each = 40)

df <- tibble::tibble(y = y, group = as.factor(group))

# anova(anova. <- lm(data = df, y ~ group))
# 
# summary(anovaComp. <- confint(multcomp::glht(anova.,
#   linfct = multcomp::mcp(group = "Tukey")))) # Add a second factor if you want
# .oma <- par(oma = c(0, 5.1, 0, 0)); plot(anovaComp.); par(.oma); rm(.oma)
```

```{r, echo = TRUE}
# nom du jeu de données df
names(df)
summary(df)
anova(anova. <- lm(data = df, y ~ group))
```

Suite à l'analyse des résultats ci-dessus, réalisez un test de comparaison multiple de Tukey. 

**Des snippets sont mis à votre disposition en fin de question**

```{r resi_prepa}
set.seed(43)
y <- c(rnorm(n = 40, mean = 20, sd = 5),
       rnorm(n = 40, mean = 21, sd = 5),
       rnorm(n = 40, mean = 22, sd = 5))
group <- rep(c("A", "B", "C"), each = 40)

df <- tibble::tibble(y = y, group = as.factor(group))
anova(anova. <- lm(data = df, y ~ group))
```

```{r tukey, exercise = TRUE, exercise.setup = "resi_prepa"}

```

```{r qeq_varII01}
question("Quelles sont les combinaisons de variables significativements différentes au seuil alpha de 0.05", 
         answer("B - A"),
         answer("C - A"),
         answer("C - B"),
         answer("aucune des propositions", correct = TRUE)
  )
```

```{r, echo = TRUE, eval = FALSE}
# ..hypothesis tests: means
#.hm

# .hmanovamult: anova - multiple comparisons [multcomp]
summary(anovaComp. <- confint(multcomp::glht(anova.,
  linfct = multcomp::mcp(${1:XFACTOR} = "Tukey")))) # Add a second factor if you want
.oma <- par(oma = c(0, 5.1, 0, 0)); plot(anovaComp.); par(.oma); rm(.oma)

# .hmanovaresid: anova - residuals
residuals(anova.)

# .hmanovaqqplot: anova - residuals QQ-plot
# plot(anova., which = 2)
anova. %>.%
  chart(broom::augment(.), aes(sample = .std.resid)) +
  geom_qq() +
  #geom_qq_line(colour = "darkgray") +
  labs(x = "Theoretical quantiles", y = "Standardized residuals") +
  ggtitle("Normal Q-Q")

# .hmanova2nested: two-way ANOVA (nested model)
anova(anova. <- lm(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR} + ${4:BLOCK} %in% ${3:XFACTOR}))

# .hmanova2noint: two-way ANOVA (without interactions)
anova(anova. <- lm(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR1} + ${4:XFACTOR2}))

# .hmanova2: two-way ANOVA (complete model)
anova(anova. <- lm(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR1} * ${4:XFACTOR2}))

# .hmanova2desc: two-way ANOVA (description)
${1:DF} %>.%
  group_by(., ${2:XFACTOR1}, ${3:XFACTOR2}) %>.%
  summarise(., mean = mean(${4:YNUM}), sd = sd(${4:YNUM}), count = sum(!is.na(${4:YNUM})))

# .hmanova1: one-way ANOVA
anova(anova. <- lm(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR}))

# .hmanova1desc: one-way ANOVA (description)
${1:DF} %>.%
  group_by(., ${2:XFACTOR}) %>.%
  summarise(., mean = mean(${3:YNUM}), sd = sd(${3:YNUM}), count = sum(!is.na(${3:YNUM})))

# .hmttestindep: independent Student's t-test
	t.test(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR},
		alternative = "two.sided", conf.level = 0.95, var.equal = TRUE)

# .hmttestpaired: paired Student's t-test
t.test(${1:DF}\$XNUM, ${1:DF}\$YNUM,
       alternative = "two.sided", conf.level = 0.95, paired = TRUE)

# .hmttestuni: univariate Student's t-test
t.test(${1:DF}\$2:XNUM,
       alternative = "two.sided", mu = 0, conf.level = 0.95)
```


## Biométrie de *Leptograpsus variegatus* (Fabricius, 1793)

Sur base de la matrice de corrélation ci-dessous provenant de données collectées sur 200 crabes :

```{r, echo=FALSE}
library(MASS)
data("crabs")
crabs_cor <- crabs[, c(4:8)]
pander::pander(cor(x = crabs_cor, y = NULL, use = "complete.obs", method = "spearman"))
```

```{r qeq_cor01}
question("Quelles sont les variables les plus corrélées ? (vous devez sélectionner 2 réponses)",
              answer("FL"),
              answer("RW"),
              answer("CL", correct = TRUE),
              answer("CW", correct = TRUE),
              answer("BD"),
              random_answer_order = TRUE)
```


##  Analyse d'un test statistique 

```{r}
iris <- data.io::read("iris", package = "datasets")
sample(1:150, size = 100, replace = FALSE) -> t
anova(anova. <- lm(data = iris[ t, ], petal_length ~ species))
```

Répondez aux questions ci-dessous sur base du tableau proposé ci-dessus :

```{r qeq_varI05}
quiz(question("De quelle analyse s'agit-il ?",
              answer(text = "Anova", correct = TRUE),
              answer(text = "Test de student"),
              answer(text = "Chi^2"),
              answer(text = "Test post-hoc"),
              answer("Aucune des réponses proposées"),
              random_answer_order = TRUE),
     question("Combien d'observation compte cette analyse ?",
              answer(text = "Aucune des réponses proposées", 
                     correct = TRUE),
              answer(text = "2"),
              answer(text = "97"),
              answer(text = "99"),
              answer(text = "3"),
              random_answer_order = TRUE))
```

## Reproduction d'un graphique

Reproduisez le graphique suivant

```{r}
set.seed(43)
df <- data_frame(x = 1:300 + rnorm(n = 300, mean = 10, sd = 5), 
                   y = x + rnorm(n = 300, mean = 10, sd = 5),
                   zone = as.factor(rep(c("A", "B"), times = 150)),
                   area = as.factor(rep(1:3, each = 100))
                   )
```

```{r}
chart(data = df, ~ y %fill=% area | area) +
  # histogramme d'arrière plan en gris ne tenant pas compte de la variable species
  geom_histogram(data = select(df, -area), fill = "grey") + 
  geom_histogram(show.legend = FALSE) +
  ylab("Effectifs")
```

avec le jeu de donnée df

```{r, echo = TRUE}
# nom du jeu de données df
# names
names(df)
summary(df)
```

**Des snippets sont mis à votre disposition en fin de question**

```{r pract01_prepa}
set.seed(43)
df <- data_frame(x = 1:300 + rnorm(n = 300, mean = 10, sd = 5), 
                   y = x + rnorm(n = 300, mean = 10, sd = 5),
                   zone = as.factor(rep(c("A", "B"), times = 150)),
                   area = as.factor(rep(1:3, each = 100))
                   )
```

```{r qec_pract01, exercise = TRUE, exercise.setup = "pract01_prepa"}

```

```{r qec_pract01-check}
#TODO
```

Vous avez à votre disposition les snippets suivants

```{r, echo = TRUE, eval = FALSE}
## Charts ###############################################################################################
# ...charts
# ..c


## Charts: Add ##########################################################################################
# ..charts: add layers or annotations
# .ca

# .caplotly: convert last ggplot2 into interactive chart
	plotly::ggplotly()

# .caylab: add or change Y label
	${1:CHART} +
		ylab("${2:YOUR Y LABEL HERE}")

# .caxlab: add or change X label
	${1:CHART} +
		xlab("${2:YOUR X LABEL HERE}")

# .catitle: add a plot title
	${1:CHART} +
		ggtitle("${2:YOUR TITLE HERE}")


## Charts: Multivariate #################################################################################
# ..charts: multivariate
# .cm

# .cmcorr: correlation chart
corrplot::corrplot(cor(${1:DF}[, ${2:1:3}], 
                       use = "pairwise.complete.obs"), method = "ellipse")

# .cmxy: multivariate X-Y scatterplot
	GGally::ggscatmat(as.data.frame(${1:DF}), ${2:1:3})


## Charts: Bivariate ####################################################################################
# ..charts: bivariate
# .cb

#.cbhistfact: histogram by factor (facets)
chart(data = ${1:DF}, ~${2:XNUM} %fill=% ${3:XFACTOR} | ${3:XFACTOR}) +
	  geom_histogram(data = select(${1:DF}, -${3:XFACTOR}), fill = "grey", bins = ${4:30}) +
	  geom_histogram(bins = ${4:30}, show.legend = FALSE)

# .cberrbar2: error bars by two factors
chart(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR1} %col=% ${4:XFACTOR2}) +
  geom_jitter(alpha = 0.4, position = position_dodge(0.4)) +
  stat_summary(geom = "point", fun.y = "mean", position = position_dodge(0.4)) +
  stat_summary(geom = "errorbar", width = 0.1, position = position_dodge(0.4),
               fun.data = "mean_cl_normal", fun.args = list(conf.int = 0.95))

#.cberrbar: error bars by factor
chart(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR}) +
  geom_jitter(alpha = 0.4, width = 0.2) +
  stat_summary(geom = "point", fun.y = "mean") +
  stat_summary(geom = "errorbar", width = 0.1,
               fun.data = "mean_cl_normal", fun.args = list(conf.int = 0.95))

# .cbviolin: violinplot by factor
	chart(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR}) +
		geom_violin()

# .cbbox: boxplot by factor
	chart(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR}) +
		geom_boxplot()

# .cbxy: X-Y scatterplot
	chart(data = ${1:DF}, ${2:YNUM} ~ ${3:XNUM}) +
		geom_point()
```

## Descripteurs employés avec la boite de dispersion

```{r qeq_visuIII01}
question("La boite de dispersion permet de résumer les données d'une variable numérique, quels sont les descripteurs employés ?",
           answer("la médiane", correct = TRUE),
           answer("la moyenne"),
           answer("l'espace inter-quartile", correct = TRUE),
           answer("la valeur maximale et la valeur minimale", correct = TRUE),
           answer("l'écart-type"),
           answer("l'intervalle de confiance"),
  random_answer_order = TRUE
)
```

## Normalité d'une variable

```{r}
set.seed(43)
df <- tibble::tibble(x = rnorm(n = 60, mean = 10, sd = 50))
# car::qqPlot(df[["x"]], distribution = "norm",
#   envelope = 0.99, col = "Black", ylab = "x",cex = .4)
```

```{r, echo = TRUE}
#nom du jeu de données : df
names(df)
summary(df)
```

Sur base du jeu de données suivant ci-dessus , répondez à la question ci-dessous

**Des snippets sont mis à votre disposition en fin de question**

```{r var04_prepa}
set.seed(43)
df <- tibble::tibble(x = rnorm(n = 60, mean = 10, sd = 50))
```


```{r varI04_cal, exercise = TRUE, exercise.setup = "var04_prepa"}

```


```{r qeq_varI04}
question("Avec une enveloppe de confiance de 0.99, est ce que la variable x du jeu de donnée df suit une ... ",
         answer("distribution normale", correct = TRUE),
         answer("distribution approximativement normale"),
         answer("distribution anormale"),
         random_answer_order = TRUE)
```


```{r, echo = TRUE, eval = FALSE}
## Charts ###############################################################################################
# ...charts
# ..c


## Charts: Add ##########################################################################################
# ..charts: add layers or annotations
# .ca

# .caplotly: convert last ggplot2 into interactive chart
	plotly::ggplotly()

# .caylab: add or change Y label
	${1:CHART} +
		ylab("${2:YOUR Y LABEL HERE}")

# .caxlab: add or change X label
	${1:CHART} +
		xlab("${2:YOUR X LABEL HERE}")

# .catitle: add a plot title
	${1:CHART} +
		ggtitle("${2:YOUR TITLE HERE}")


## Charts: Multivariate #################################################################################
# ..charts: multivariate
# .cm

# .cmcorr: correlation chart
corrplot::corrplot(cor(${1:DF}[, ${2:1:3}], 
                       use = "pairwise.complete.obs"), method = "ellipse")

# .cmxy: multivariate X-Y scatterplot
	GGally::ggscatmat(as.data.frame(${1:DF}), ${2:1:3})


## Charts: Bivariate ####################################################################################
# ..charts: bivariate
# .cb

#.cbhistfact: histogram by factor (facets)
chart(data = ${1:DF}, ~${2:XNUM} %fill=% ${3:XFACTOR} | ${3:XFACTOR}) +
	  geom_histogram(data = select(${1:DF}, -${3:XFACTOR}), fill = "grey", bins = ${4:30}) +
	  geom_histogram(bins = ${4:30}, show.legend = FALSE)

# .cberrbar2: error bars by two factors
chart(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR1} %col=% ${4:XFACTOR2}) +
  geom_jitter(alpha = 0.4, position = position_dodge(0.4)) +
  stat_summary(geom = "point", fun.y = "mean", position = position_dodge(0.4)) +
  stat_summary(geom = "errorbar", width = 0.1, position = position_dodge(0.4),
               fun.data = "mean_cl_normal", fun.args = list(conf.int = 0.95))

#.cberrbar: error bars by factor
chart(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR}) +
  geom_jitter(alpha = 0.4, width = 0.2) +
  stat_summary(geom = "point", fun.y = "mean") +
  stat_summary(geom = "errorbar", width = 0.1,
               fun.data = "mean_cl_normal", fun.args = list(conf.int = 0.95))

# .cbviolin: violinplot by factor
	chart(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR}) +
		geom_violin()

# .cbbox: boxplot by factor
	chart(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR}) +
		geom_boxplot()

# .cbxy: X-Y scatterplot
	chart(data = ${1:DF}, ${2:YNUM} ~ ${3:XNUM}) +
		geom_point()
	
## Charts: Univariate ###################################################################################
# ..charts: univariate
#.cu

#.cuqqchisq: QQ plot - chi-square
car::qqPlot(${1:DF}[["${2:XNUM}"]], distribution = "chisq", df = ${3:DEGREES_OF_FREEDOM},
            envelope = 0.95, col = "Black", ylab = "${2:XNUM}")

#.cuqqf: QQ plot - F
car::qqPlot(${1:DF}[["${2:XNUM}"]], distribution = "f", df1 = ${3:NUMERATOR_DF}, df2 = ${4:DENOMINATOR_DF},
            envelope = 0.95, col = "Black", ylab = "${2:XNUM}")

#.cuqqt: QQ plot - Student t
car::qqPlot(${1:DF}[["${2:XNUM}"]], distribution = "t", df = ${3:DEGREES_OF_FREEDOM},
            envelope = 0.95, col = "Black", ylab = "${2:XNUM}")

#.cuqqnorm: QQ plot - normal
car::qqPlot(${1:DF}[["${2:XNUM}"]], distribution = "norm",
            envelope = 0.95, col = "Black", ylab = "${2:XNUM}")

#.cuhbar: horizontal bars
chart(data = ${1:DF}, ~factor(${2:VAR})) +
  geom_bar() + coord_flip()

#.cuvbar: vertical bars
chart(data = ${1:DF}, ~factor(${2:VAR})) +
  geom_bar()

#.cuhist: histogram
chart(data = ${1:DF}, ~${2:VARNUM}) +
  geom_histogram(binwidth = ${3:30})
```


## Diversité de poissons dans les cours d'eau wallons

```{r}
set.seed(43)
rep(c("A", "B", "C", "D", "E"), each = 20) -> t
tt <- c(rnorm(n = 20, mean = 10, sd = 1),
        rnorm(n = 20, mean = 12, sd = 1),
        rnorm(n = 20, mean = 11, sd = 1),
        rnorm(n = 20, mean = 12, sd = 1),
        rnorm(n = 20, mean = 14, sd = 1))
density <- tibble::tibble(area = as.factor(t) , densi = tt)

density %>.%
  dplyr::filter(., area %in% c("A", "C", "D") & densi > 12.5) %>.%
  nrow(.)-> t111
```

Des scientifiques réalisent des pêches sur 100 stations d'intérêts afin d'étudier la diversité des poissons dans les cours d'eau de wallonie. Ils s'intéressent tout particulièrement à l'espèce *Barbus barbus* L. 1758. A la suite de leurs recensements, ils souhaitent connaitre le nombre de stations dans les zones A,C,D dont la densité relative en barbeau est supérieure à 12.5 % par rapport à l'ensemble des poissons pêchés. 

Ils mettent à votre disposition un jeu de données qui se nomme `density` avec deux variables les zones (`area`) et la densité relative (`densi`) de barbeau commun par rapport à l'ensemble des poissons pêchés. 

```{r, echo = TRUE}
#nom du jeu de données : density
names(density)
summary(density)
```

 Vous devez retirer les zones (`area`) **B** et **E** et ne garder que les valeurs de densité strictement supérieures à 12.5. 

**Des snippets sont mis à votre disposition en fin de question**

```{r transfo01}
set.seed(43)
set.seed(43)
rep(c("A", "B", "C", "D", "E"), each = 20) -> t
tt <- c(rnorm(n = 20, mean = 10, sd = 1),
        rnorm(n = 20, mean = 12, sd = 1),
        rnorm(n = 20, mean = 11, sd = 1),
        rnorm(n = 20, mean = 12, sd = 1),
        rnorm(n = 20, mean = 14, sd = 1))
density <- tibble::tibble(area = as.factor(t) , densi = tt)

density %>.%
  dplyr::filter(., area %in% c("A", "C", "D") & densi > 12.5) %>.%
  nrow(.)-> t111
```

```{r transfo01_cal, exercise = TRUE, exercise.setup = "transfo01"}

```

```{r qeq_transfo01}
question("Combien de stations ont une densité en barbeau strictement supérieurs à $12.5$ compris dans les zones A,C,D ?", 
         answer(sprintf("$%s$", t111), correct = TRUE),
         answer(sprintf("$%s$", t111 + 22)),
         answer(sprintf("$%s$", t111 + 3)),
         answer(sprintf("$%s$", t111+1)),
         answer(sprintf("$%s$", t111 + 52)),
         random_answer_order = TRUE)
```

**Snippets**

```{r, echo = TRUE, eval=FALSE}
#.dosel select cases
DF %>.%
  filter(., CONDITIONS) -> DF2
DF %>.%
  select(., VAR1, VAR2) -> DF2
```

## Homoscédasticité

```{r qeq_varI03}
question("Y a t'il homoscédasticité avec une valeur de p de 0.0003 au seuil $\\alpha$ de 0.05 lors d'un test de Bartlett",
  answer("Oui"),
  answer("Non", correct = TRUE),
  answer("Ce test ne permet pas de déterminer l'homoscédasticité"),
         random_answer_order = TRUE)
```

## Type de données

```{r transfo02, include=TRUE, echo= FALSE}
bio <- tibble::tibble(identifiant = c(1:4) , intensite_dans_etude = c("intensif", "faible", "moyen", "moyen"), age = c(18, 24, 20, 19), genre = c("H", "H", "F", "H"))
knitr::kable(bio, col.names = c("Identifiant", "Travail", "Age", "Genre"))
```

Sur base des données ci-dessus, répondez aux questions suivantes 

```{r qeq_transfo02}
question("Quel est le type de la variable **travail** ? ",
  random_answer_order = TRUE,
  answer("Quantitative continue"),
  answer("Quantitative discrète"),
  answer("Qualitative ordonnée", correct = TRUE),
  answer("qualitative non ordonnée"),
  answer("aucune des réponses proposées")
           )
```

## Choix d'un test statistique

```{r qeq_varI02}
question("Sélectionnez le(s) test(s) statistique(s) qui permet(tent) de vérifier l'homogénéité des variances",
         answer("Test de Bartlett", correct = TRUE),
         answer("Test de Shapiro-wilk"),
         answer("Test de Friedman"),
         answer("Test de Pearson"),
         answer("Aucune des réponses proposées"),
         random_answer_order = TRUE)
```

## Indice de masse corporelle 

Sur base d'un questionnaire lié à l'indice de masse corporelle et l'activité physique, les chercheurs ont classé les individus en différents niveaux d'activité physique et d'IMC. Ils obtiennent le tableau suivant : 

```{r proba01}
# fixation de l'aléatoire pour préparer la question
set.seed(42)

# preparation du tableau de donnees
imc <- data.frame("Sous-poids" = sample(20:70, size = 3), 
                     "Normal" = sample(30:80, size = 3), 
                     "Surpoids" = sample(10:60, size = 3),
                     "Obésité" = sample(0:50, size = 3),
                     row.names = c("Activité physique occasionnelle", 
                       "Activité physique régulière", 
                       "Activité physique de haut niveau"))
#tableau de l imc
knitr::kable(imc, caption = "Tableau")

# réponse ##############
## correct1
c1 <- (sum(imc[2, ]) + sum(imc[ ,4]) - imc[2,4]) / sum(imc[1:3, ])
##false1
f1 <- (sum(imc[2, ])/sum(imc[1:2, ]))
##false2
f2 <- sum(imc[3, ])/sum(imc[1:2, ])
##false3
f3 <- (sum(imc[2:3, ])/sum(imc[1:2, ]))
##false4
f4 <- "Aucune réponse citée n'est correcte"
```

Afin de vous aider dans vos réflexions, voici la somme des lignes et des colonnes

```{r}
# Somme des lignes
(rowSums(imc) -> x)
# Somme des colonnes
(colSums(imc) -> y)
```

Vous avez à votre disposition une zone de code.

```{r proba01_cal, exercise = TRUE}

```

Répondez aux questions ci-dessous sur base du tableau proposé ci-dessus :

```{r qeq_proba01}
question(
  "Quelle est la probabilité d'avoir une activité physique régulière ou d'être obèse ?",
              answer(sprintf("$%.4f$", c1), correct = TRUE),
              answer(sprintf("$%.4f$", f1)),
              answer(sprintf("$%.4f$", f2)),
              answer(sprintf("$%.4f$", f3)),
              answer(sprintf("%s", f4)),
              random_answer_order = TRUE)
```


## Distribution de Fischer 

```{r qeq_varI01}
question("A quels tests statistiques pouvez vous associer la distribution de Fischer",
         answer("Anova", correct = TRUE),
         answer("Test t de Student"),
         answer("Test de Kruskal-Wallis"),
         answer("Test post-hoc de Tukey"),
         answer("Test de Wilcoxon"),
         answer("Test de chi^2"),
         random_answer_order = TRUE)
```

## Culture de *Zea mays* L. 1753

```{r proba02}
# moyenne 
m <- sample(x = 120:140, size = 1)
# écart-type
s <- sample(x = 20:30, size = 1)
# valeur d'intérêt
q <- sample(x = 140:150, size = 1)
# valeur d'intérêt 2
y <- sample(x = 130:140, size = 1)
# valeur d'intérêt 3
y1 <- sample(x = 110:120, size = 1)

# Réponses
p1 <- pnorm(y, mean = m, sd = s, 
            lower.tail = TRUE) - pnorm(y1, mean = m, sd = s, 
                                       lower.tail = TRUE)
p2 <- pnorm(y - 5, mean = m, sd = s, 
            lower.tail = TRUE) - pnorm(y1, mean = m-s, sd = s, 
                                       lower.tail = TRUE)
p3 <- pnorm(y, mean = q, sd = q, 
            lower.tail = TRUE) - pnorm(y1 +20, mean = m, sd = s/2,
                                       lower.tail = TRUE)
p4 <- pnorm(y, mean = m, sd = s, 
            lower.tail = TRUE) - pnorm(y1, mean = q, sd = s, 
                                       lower.tail = TRUE)
```

Dans un champ de maïs (Considérez le nombre de plants de maïs comme très grand), dont la taille moyenne est de `r m`  cm et d'écart type de `r s` cm. 

**Des snippets sont mis à votre disposition en fin de question**

```{r proba02_cal, exercise = TRUE}

```


```{r qeq_proba02}
question(
  sprintf("Quelle est la probabilité d'obtenir une plante dont la taille est comprise entre $%s$ et $%s$ cm ?", y, y1), 
  answer(sprintf("$%.4f$", p1),correct = TRUE),
  answer(sprintf("$%.4f$", p2)),
  answer(sprintf("$%.4f$", p3)),
  answer(sprintf("$%.4f$", p4)),
  answer("Aucune des réponses proposées"),
  random_answer_order = TRUE
)
```

**Snippets**

```{r,echo = TRUE, eval = FALSE}
### .iu : distribution uniforme 
punif(QUANTILES, min = 0, max = 1, lower.tail = TRUE)
qunif(PROBABILITIES, min = 0, max = 1, lower.tail = TRUE)

### .in distribution normale
pnorm(QUANTILES, mean = 0, sd = 1, lower.tail = TRUE)
qnorm(PROBABILITIES, mean = 0, sd = 1, lower.tail = TRUE)

### .il distribution log-normal
plnorm(QUANTILES, meanlog = 0, sdlog = 1, lower.tail = TRUE)
qlnorm(PROBABILITIES, meanlog = 0, sdlog = 1, lower.tail = TRUE)

### .it distribution de student
.mu <- 0; .s <- 1; pt((QUANTILES - .mu)/.s, df = DEGREES_OF_FREEDOM, lower.tail = TRUE)
.mu <- 0; .s <- 1; .mu + .s * qt(PROBABILITIES, df = DEGREES_OF_FREEDOM, lower.tail = TRUE)

### .ib distribution binomial
pbinom(QUANTILES, size = N_TRIALS, prob = SUCCESS_PROB, lower.tail = TRUE)
qbinom(PROBABILITIES, size = N_TRIALS, prob = SUCCESS_PROB, lower.tail = TRUE)

### .ip distribution de poisson
ppois(QUANTILES, lambda = MEAN_OCCURENCES, lower.tail = TRUE)
qpois(PROBABILITIES, lambda = MEAN_OCCURENCES, lower.tail = TRUE)

### .ic distribution chi2
pchisq(QUANTILES, df = DEGREES_OF_FREEDOM, lower.tail = TRUE)
qchisq(PROBABILITIES, df = DEGREES_OF_FREEDOM, lower.tail = TRUE)

### .if distibution de F
pf(QUANTILES, df1 = NUMERATOR_DF, df2 = DENOMINATOR_DF, lower.tail = TRUE)
```

## Test de Student

```{r}
set.seed(43)
weight <- tibble::tibble(weight = c(rnorm(n = 15, mean = 100, sd = 5), 
                      rnorm(n = 15, mean = 102, sd = 5)), 
           area = rep(c("a", "b"), each = 15))
weight$area <- as.factor(weight$area)
```

```{r student1_prepa}
set.seed(43)
weight <- tibble::tibble(weight = c(rnorm(n = 15, mean = 100, sd = 5), 
                      rnorm(n = 15, mean = 102, sd = 5)), 
           area = rep(c("a", "b"), each = 15))
weight$area <- as.factor(weight$area)
```

Vous avez à votre disposition le jeu de données `weight` dont voici quelques informations :

```{r, echo = TRUE}
# nom du jeu de données : weight
# nom des variables du jeu de données
names(weight)
# résumé des variables
summary(weight)
```

Réalisez un test de Student bilatéral avec un seuil $\alpha$ de 0.05 et de variance inégale.

**Des snippets  sont mis à votre disposition en fin de question**

```{r student1, exercise = TRUE, exercise.setup = "student1_prepa"}

```

```{r qeq_mean02}
quiz(
  question("Quels sont les résultats de ce test ?",
         answer("t = $-1.452$, df = $27.994$, p-value = 0.1575", correct = TRUE),
         answer("t = $-1.452$, df = $28$, p-value = 0.1575"),
         answer("t = $-1.452$, df = $28$, p-value = 0.0787"),
         answer("t = $-1.452$, df = $27.994$, p-value = 0.0787"),
         random_answer_order = TRUE),
  question("Y a t'il une différence significative au seuil $\\alpha$ de 0.05 de masse entre les deux zones étudiées pour la masse monitorée",
         answer("oui"),
         answer("non", correct = TRUE), 
         random_answer_order = TRUE))
```

```{r, echo = TRUE, eval = FALSE}
# .hm
# .hmttestindep: independent Student's t-test
t.test(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR}, alternative = "two.sided", conf.level = 0.95, var.equal = TRUE)

# .hmttestpaired: paired Student's t-test
t.test(${1:DF}\$XNUM, ${1:DF}\$YNUM, alternative = "two.sided", conf.level = 0.95, paired = TRUE)

# .hmttestuni: univariate Student's t-test
t.test(${1:DF}\$2:XNUM, alternative = "two.sided", mu = 0, conf.level = 0.95)
```

##  Distribution de poisson

```{r proba03}
.table <- data.frame(occurences = 0:(5+20), probability = dpois(0:(5+20), lambda = 5))
round(.table$probability,4) -> t
```

Calculez P($Y = 2$) d'une distribution de poisson avec une valeur de lambda de 5. 

**Des snippets sont mis à votre disposition en fin de question**

```{r proba03_cal, exercise = TRUE}

```

```{r qeq_proba03}
question("Calculez P($Y = 2$)",
         answer(sprintf("$%s$", t[1])),
         answer(sprintf("$%s$", t[2])),
         answer(sprintf("$%s$", t[3]), correct = TRUE),
         answer(sprintf("$%s$", t[4])),
         answer("aucune des réponses proposées"),
         random_answer_order = TRUE)
```

```{r, echo = TRUE, eval=FALSE}
## Distribution: poisson #########################################################################
# ..i (d)istribution: poisson
#.ip

# .ipcumul: poisson dist. - cumulative dens. plot
plot(0:(${1:MEAN_OCCURENCES}+20), dpois(0:(${1:MEAN_OCCURENCES}+20), lambda = ${1:MEAN_OCCURENCES}), type = "s",
     col = "black", xlab = "Quantiles", ylab = "Cumulative probability")

#.ipdens: poisson dist. - density plot
plot(0:(${1:MEAN_OCCURENCES}+20), dpois(0:(${1:MEAN_OCCURENCES}+20), lambda = ${1:MEAN_OCCURENCES}), type = "h",
     col = "black", xlab = "Quantiles", ylab = "Probability mass")

# .iptable: poisson dist. - table of probabilities
	(.table <- data.frame(occurences = 0:(${1:MEAN_OCCURENCES}+20), probability = dpois(0:(${2:MEAN_OCCURENCES}+20),
		lambda = ${2:MEAN_OCCURENCES})))

# .iprandom: poisson dist. - random
	rpois(${1:<N>}, lambda = ${2:MEAN_OCCURENCES})

# .ipquant: poisson dist. - quantiles
	qpois(${1:PROBABILITIES}, lambda = ${2:MEAN_OCCURENCES}, lower.tail = ${3:TRUE})

# .ipproba: poisson dist. - probabilities
	ppois(${1:QUANTILES}, lambda = ${2:MEAN_OCCURENCES}, lower.tail = ${3:TRUE})


## Distribution: binomial #########################################################################
# ..i (d)istribution: binomial
	.ib

# .ibcumul: binomial dist. - cumulative dens. plot
	plot(0:${1:N_TRIALS}, pbinom(0:${1:N_TRIALS}, size = ${1:N_TRIALS}, prob = ${2:SUCCESS_PROB), type = "s",
		col = "black", xlab = "Quantiles", ylab = "Cumulative probability")

#.ibdens: binomial dist. - density plot
	plot(0:${1:N_TRIALS}, dbinom(0:${1:N_TRIALS}, size = ${1:N_TRIALS}, prob = ${2:SUCCESS_PROB}), type = "h",
		col = "black", xlab = "Quantiles", ylab = "Probability mass")

# .ibtable: binomial dist. - table of probabilities
	(.table <- data.frame(success = 0:${1:N_TRIALS},
		probability = dbinom(0:${1:N_TRIALS}, size = ${1:N_TRIALS}, prob = ${2:SUCCESS_PROB})))

# .ibrandom: binomial dist. - random
	rbinom(${1:N}, size = ${2:N_TRIALS}, prob = ${3:SUCCESS_PROB})

# .ibquant: binomial dist. - quantiles
	qbinom(${1:PROBABILITIES}, size = ${2:N_TRIALS}, prob = ${3:SUCCESS_PROB}, lower.tail = ${4:TRUE})

# .ibproba: binomial dist. - probabilities
	pbinom(${1:QUANTILES}, size = ${2:N_TRIALS}, prob = ${3:SUCCESS_PROB}, lower.tail = ${4:TRUE})
```

## Croissance d' *Ailuropoda melanoleuca* (David, 1868)

Plusieurs naissances d' *Ailuropoda melanoleuca* (David, 1868) se sont déroulés au sein du centre de recherche et d'élevage du panda géant situé dans la province du Sichuan (Chine). Les scientifiques ont pesé les nouveaux nés et voici les masses en grammes de ces derniers : 

```{r mean01}
# fixation de l'aléatoire pour préparer la question
#set.seed(42)
# preparation du vecteur d'intérêt
x <- round(rnorm(n = 5, mean = 100, sd = 10), 3)
cat(x)
# réponse ##############
## correct1
c1a <- mean(x)
c1b <- sd(x)
##false1
f1a <- c1a + rnorm(n = 1)
f1b <- c1b + rnorm(n = 1)
##false2
f2a <- mean(x[1:3])
f2b <- sd(x[1:3])
##false3
f3a <- f2a + rnorm(n = 1)
f3b <- f2b + rnorm(n = 1)
##false4
f4 <- "Aucune réponse citée n'est correcte"
```

Les scientifiques souhaitent connaitre la moyenne et l'écart-type pour ces 5 nouveaux individus. Vous avez à votre disposition une zone de code afin de réaliser vos calculs.

```{r mean01_cal, exercise = TRUE}

```

Répondez à la question ci-dessous :

```{r qeq_mean01}
question("Calculez la moyenne et l'écart-type pour ces 5 individus",
              answer(sprintf("$%.3f \\pm %.3f$", c1a, c1b), correct = TRUE),
              answer(sprintf("$%.3f \\pm %.3f$", f1a, f1b)),
              answer(sprintf("$%.3f \\pm %.3f$", f2a, f2b)),
              answer(sprintf("$%.3f \\pm %.3f$", f3a, f3b)),
              answer(sprintf("%s", f4)),
              random_answer_order = TRUE)
```

## Parité au sein d'une entreprise 

Une étude est menée au sein d'une entreprise qui s'intéresse à la parité homme-femme en son sein. 

```{r chi01}
#set.seed(42)
(tab <- as.table(c(Homme = 2000 + sample(0:500, size = 1), Femme = 2000 + sample(0:500, size = 1))))
#reponse
chi <- chisq.test(tab, p = c(1/2, 1/2), rescale.p = FALSE)
```

Vous avez à votre disposition une zone de code afin de réaliser vos calculs.

**Des snippets sont mis à votre disposition en fin de question**


```{r chi01_cal, exercise = TRUE}

```


Suite à l'analyse ci-dessus, répondez à la question ci-dessous :

```{r qeq_chi01}
question("Quelle est la valeur de p que vous obtenez ?",
              answer(sprintf("%.5f", chi$p.value), correct = TRUE),
              answer(sprintf("%.5f", chi$p.value + 0.5)),
              answer(sprintf("%.5f", chi$p.value - 0.5)),
              answer(sprintf("%.5f", ((chi$p.value/2) + 0.01) )),
              answer("Aucune des réponses proposées"),
              random_answer_order = TRUE)
```

**Snippets**

```{r, echo = TRUE, eval=F}
## Hypothesis tests ####################################################################################
snippet ...hypothesis tests
	..h


## Hypothesis tests: Correlation #########################################################################
snippet ..hypothesis tests: correlation
	.hc

snippet .hccorr: correlation test
	cor.test(data = ${1:DF}, ${2:YNUM} ~ ${3:XNUM},
		alternative = "two.sided", method = "pearson")


## Hypothesis tests: Variances #########################################################################
snippet ..hypothesis tests: variances
	.hv

snippet .hvftest: two-variances F-test
	var.test(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR},
		alternative = "two.sided", conf.level = 0.95)

snippet .hvlevene: Levene test
	car::levene.test(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR})

snippet .hvbartlett: Bartlett test
	bartlett.test(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR})


## Hypothesis tests: Proportions #######################################################################
snippet ..hypothesis tests: proportions
	.hp

snippet .hpuni: univariate proportion test
	prop.test(rbind(table(${1:DF}\$XFACTOR)),
		alternative = "two.sided", p = ${3:0.5}, conf.level = 0.95, correct = FALSE)

snippet .hpbi: bivariate proportion test
	prop.test(rbind(table(${1:DF}\$XFACTOR, ${1:DF}\$YFACTOR)),
		alternative = "two.sided", conf.level = 0.95, correct = FALSE)


## Hypothesis tests: Nonparametric ####################################################################
snippet ..hypothesis tests: nonparametric
	.hn

snippet .hnfried: Friedman test
	friedman.test(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR} | ${4:BLOCK})

snippet .hnkrusmult: Kruskal-Wallis - multiple comparisons [nparcomp]
	summary(kw_comp. <- nparcomp::nparcomp(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR}))
	plot(kw_comp.)

snippet .hnkrus: Kruskal-Wallis test
	kruskal.test(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR})

snippet .hnwilkindep: independent Wilcoxon test
	wilcox.test(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR},
		alternative = "two.sided", conf.level = 0.95)

snippet .hnwilkpaired: paired Wilcoxon test
	wilcox.test(${1:DF}\$XNUM, ${1:DF}\$YNUM,
		alternative = "two.sided", conf.level = 0.95, paired = TRUE)


## Hypothesis tests: Means #############################################################################
snippet ..hypothesis tests: means
	.hm

snippet .hmanovamult: anova - multiple comparisons [multcomp]
	summary(anovaComp. <- confint(multcomp::glht(anova.,
		linfct = multcomp::mcp(${1:XFACTOR} = "Tukey")))) # Add a second factor if you want
	.oma <- par(oma = c(0, 5.1, 0, 0)); plot(anovaComp.); par(.oma); rm(.oma)

snippet .hmanovaresid: anova - residuals
	residuals(anova.)

snippet .hmanovaqqplot: anova - residuals QQ-plot
	#plot(anova., which = 2)
	anova. %>.%
		chart(broom::augment(.), aes(sample = .std.resid)) +
		geom_qq() +
		geom_qq_line(colour = "darkgray") +
		labs(x = "Theoretical quantiles", y = "Standardized residuals") +
		ggtitle("Normal Q-Q")

snippet .hmanova2nested: two-way ANOVA (nested model)
	anova(anova. <- lm(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR} + ${4:BLOCK} %in% ${3:XFACTOR}))

snippet .hmanova2noint: two-way ANOVA (without interactions)
	anova(anova. <- lm(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR1} + ${4:XFACTOR2}))

snippet .hmanova2: two-way ANOVA (complete model)
	anova(anova. <- lm(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR1} * ${4:XFACTOR2}))

snippet .hmanova2desc: two-way ANOVA (description)
	${1:DF} %>.%
		group_by(., ${2:XFACTOR1}, ${3:XFACTOR2}) %>.%
		summarise(., mean = mean(${4:YNUM}), sd = sd(${4:YNUM}), count = sum(!is.na(${4:YNUM})))

snippet .hmanova1: one-way ANOVA
	anova(anova. <- lm(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR}))

snippet .hmanova1desc: one-way ANOVA (description)
	${1:DF} %>.%
		group_by(., ${2:XFACTOR}) %>.%
		summarise(., mean = mean(${3:YNUM}), sd = sd(${3:YNUM}), count = sum(!is.na(${3:YNUM})))

snippet .hmttestindep: independent Student's t-test
	t.test(data = ${1:DF}, ${2:YNUM} ~ ${3:XFACTOR},
		alternative = "two.sided", conf.level = 0.95, var.equal = TRUE)

snippet .hmttestpaired: paired Student's t-test
	t.test(${1:DF}\$XNUM, ${1:DF}\$YNUM,
		alternative = "two.sided", conf.level = 0.95, paired = TRUE)

snippet .hmttestuni: univariate Student's t-test
	t.test(${1:DF}\$2:XNUM,
		alternative = "two.sided", mu = 0, conf.level = 0.95)


## Hypothesis tests: Distribution #######################################################################
snippet ..hypothesis tests: distribution
	.hd

snippet .hdnorm: Shapiro-Wilk test of normality
	shapiro.test(${1:DF}\$XNUM)


## Hypothesis tests: Contingency #######################################################################
snippet ..hypothesis tests: contingency
	.hc

snippet .hcfisher: Fisher test of independence
	fisher.test(${1:{TABLE})

snippet .hcchi2comp: Chi2 test (components)
	round(chisq.test(${1:TABLE})[["residuals"]]^2, 2)

snippet .hcchi2bi: Chi2 test (independence)
	(chi2. <- chisq.test(${1:TABLE})); cat("Expected frequencies:\n"); chi2.[["expected"]]

snippet .hcchi2uni: Chi2 test (univariate)
	chisq.test(${1:TABLE}, p = ${2:PROBABILITIES}, rescale.p = FALSE)
```


## Conclusion

Vous venez de terminer votre examen.

Laissez nous vos impressions sur cet outil pédagogique ou expérimentez encore dans la zone ci-dessous. Rappelez-vous que pour placer un commentaire dans une zone de code R, vous devez utilisez un dièse (`#`) devant vos phrases.

```{r comm, exercise=TRUE, exercise.lines = 8}
# Ajout de commentaires 
# ...
```

```{r comm-check}
# Not yet...
```